<div class="max-w-4xl mx-auto p-6">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 flex items-center gap-2">
      <mat-icon class="!h-8 !w-8 text-indigo-600">history</mat-icon>
      我的填寫紀錄
    </h1>
    <p class="text-gray-500 mt-2">查看您過去參與過的所有問卷調查。</p>
  </div>

  <mat-card class="overflow-hidden">
    <table mat-table [dataSource]="history()" class="w-full">
      
      <ng-container matColumnDef="index">
        <th mat-header-cell *matHeaderCellDef> # </th>
        <td mat-cell *matCellDef="let h; let i = index"> {{ i + 1 }} </td>
      </ng-container>

      <ng-container matColumnDef="surveyTitle">
        <th mat-header-cell *matHeaderCellDef> 問卷名稱 </th>
        <td mat-cell *matCellDef="let h" class="font-medium"> {{ h.surveyTitle }} </td>
      </ng-container>

      <ng-container matColumnDef="submittedAt">
        <th mat-header-cell *matHeaderCellDef> 提交時間 </th>
        <td mat-cell *matCellDef="let h" class="text-gray-600"> 
          {{ h.submittedAt | date:'yyyy-MM-dd HH:mm' }} 
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="text-right"> 操作 </th>
        <td mat-cell *matCellDef="let h" class="text-right">
          <button mat-button color="primary" [routerLink]="['/fill', h.surveyId]">
            查看內容
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell p-12 text-center" colspan="4">
          您目前還沒有填寫過任何問卷。
          <br>
          <button mat-raised-button color="primary" routerLink="/home" class="mt-4">
            前往查看進行中的問卷
          </button>
        </td>
      </tr>
    </table>
  </mat-card>
</div>
